<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web S3 Cleaner</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <header id="topbar">
      <div class="brand">
        <img src="/static/logo.svg" alt="Web S3 Cleaner" class="logo" />
        <h1>Web S3 Cleaner</h1>
      </div>
      <div class="header-actions">
        <button id="theme-toggle" class="icon-btn" aria-label="Toggle theme" title="Toggle theme">🌓</button>
      </div>
    </header>
    <main>
      <aside id="sidebar">
        <h2>🪣 Buckets <span id="buckets-spinner" class="spinner small hidden" title="Loading"></span></h2>
        <ul id="buckets"></ul>
      </aside>
      <section id="content">
        <div id="bucket-actions" class="hidden">
          <div class="actions-row">
            <h2 id="bucket-title"></h2>
            <span id="title-spinner" class="spinner small hidden" title="Loading"></span>
            <button id="btn-smart-cleanup">🧹 Smart cleanup</button>
            <button id="btn-smart-cleanup-folders">🧹📁 Folders cleanup</button>
            <button id="btn-cleanup">🧼 Cleanup (30+ days)</button>
            <button id="btn-delete-all" class="danger">🗑️ Delete ALL</button>
          </div>
          <div id="breadcrumbs"></div>
          <div id="counts" class="muted small">📄 Files: <span id="count-files">0</span> • 📁 Folders: <span id="count-folders">0</span> <span id="count-spinner" class="spinner small hidden" title="Counting"></span> <button id="copy-link" class="icon-btn" title="Copy share link" aria-label="Copy link">🔗</button></div>
        </div>
        <div id="listing">
          <div id="listing-overlay" class="overlay hidden" aria-hidden="true">
            <div class="spinner large" aria-label="Loading"></div>
          </div>
          <table>
            <thead>
              <tr>
                <th data-sort="name">Name <span class="sort-icon"></span></th>
                <th data-sort="size">Size <span class="sort-icon"></span></th>
                <th data-sort="last_modified">Last Modified <span class="sort-icon"></span></th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="rows"></tbody>
          </table>
          <div id="pager">
            <button id="prev" disabled>◀️ Prev</button>
            <button id="next" disabled>Next ▶️</button>
          </div>
        </div>
        <pre id="status"></pre>
      </section>
      <!-- Modal for preview/approval -->
      <div id="preview-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="preview-title">
        <div class="dialog" role="document">
          <div id="preview-panel">
            <div class="panel-header">
              <h3 id="preview-title">Review planned deletions</h3>
              <div class="actions">
                <label><input type="checkbox" id="select-all"> Select all</label>
                <button id="approve-selected" class="danger" disabled>Approve Selected</button>
                <button id="approve-all" class="danger" disabled>Approve All</button>
                <button id="cancel-preview">Cancel</button>
              </div>
            </div>
            <div id="preview-info" class="muted"></div>
            <div id="delete-progress" class="hidden">
              <div class="progress-row">
                <div class="progress-track"><div class="progress-bar" id="delete-progress-bar"></div></div>
                <div class="progress-text" id="delete-progress-text">0%</div>
                <button id="delete-stop" title="Stop deleting">Stop</button>
              </div>
            </div>
            <div id="preview-list" class="scroll"></div>
          </div>
        </div>
      </div>
    </main>
    <script src="/static/app.js"></script>
  </body>
  </html>
